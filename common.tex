%!TEX root = da-dev.tex

\usepackage[font=small,margin=1em]{caption}
\usepackage[T1]{fontenc}
\usepackage[charter]{mathdesign}
\usepackage[UKenglish]{babel}
\usepackage{amsmath,amsthm,booktabs,enumitem,graphicx,hyphenat,titlesec,titletoc,url,xcolor}
\usepackage{microtype}
\usepackage[numbers,sort&compress]{natbib}
\usepackage{enotez}
\usepackage{hyperref}
\renewcommand{\sfdefault}{phv}

%---- Dates ----

\AtBeginDocument{%
    \renewcommand{\today}{\number\day~\ifcase\month\or January\or February\or March\or April\or May\or June\or July\or August\or September\or October\or November\or December\fi\space \number\year}%
}
\date{\today}

%---- Layout ----

\pagestyle{plain}
\clubpenalty=10000
\widowpenalty=10000
\hyphenation{auton-o-mous Hir-vo-nen Ju-ho Hir-vo-nen Kaa-si-nen Suo-me-la Tuo-mo Wawr-zyniak Ya-ma-shi-ta}

%---- Colours ----

\definecolor{titlecolor}{rgb}{0,0,0.5}
\definecolor{hlcolor}{rgb}{0.75,0,0}

%---- Sections ----

\titleformat{\part}[display] {\raggedright\normalfont\LARGE\color{titlecolor}}{Part \thepart}{0pt}{\Huge}
\titleformat{\chapter}[display] {\raggedright\normalfont\Large\color{titlecolor}}{\chaptertitlename\ \thechapter}{0pt}{\Huge}[\vspace{5pt}\titlerule]
\titleformat{\section}          {\raggedright\normalfont\Large\bfseries\color{titlecolor}}{\thesection}{1ex}{}
\titleformat{\subsection}       {\raggedright\normalfont\large\bfseries\color{titlecolor}}{\thesubsection}{1ex}{}
\titleformat{\paragraph}[runin] {\normalfont\normalsize\bfseries}{\theparagraph}{1em}{}

\newcommand{\uchapter}[1]{\chapter*{#1}\phantomsection\addcontentsline{toc}{chapter}{#1}}
\newcommand{\usection}[1]{\section*{#1}\phantomsection\addcontentsline{toc}{section}{#1}}
\newcommand{\longsection}[2]{\section[#1]{#1: #2}}

%---- TOC ----

\contentsmargin{7mm}

\titlecontents{part}
              [0mm]
              {\addvspace{7mm}\Large\bfseries\color{titlecolor}}
              {}
              {Part }
              {}

\titlecontents{chapter}
              [6mm]
              {\addvspace{4mm}\bfseries}
              {\contentslabel{6mm}}
              {\hspace*{-6mm}}
              {\titlerule[0pt]\contentspage}
              [\addvspace{2mm}]

\titlecontents{section}
              [15mm]
              {}
              {\contentslabel{9mm}}
              {\hspace*{-9mm}}
              { \titlerule*[0.7pc]{.}\contentspage}

\titlecontents{subsection}
              [27mm]
              {}
              {\contentslabel{12mm}}
              {\hspace*{-12mm}}
              { \titlerule*[0.7pc]{.}\contentspage}

%---- Hyperlinks ----

\urlstyle{same}

\hypersetup{
    hidelinks
}

%---- Lists ----

\setenumerate{label=(\alph*)}

\newlist{descriptionb}{description}{1}
\setlist[descriptionb]{font=\normalfont\itshape,leftmargin=0pt,itemsep=1ex,style=unboxed}

\newlist{notation}{description}{1}
\setlist[notation]{font=\normalfont,labelindent=0em,leftmargin=6em,itemsep=0ex,style=sameline}

\newlist{algorithms}{description}{1}
\setlist[algorithms]{font=\normalfont,labelindent=0em,leftmargin=6em,itemsep=0ex,style=sameline}

\newlist{subex}{enumerate}{1}
\setlist[subex]{label=(\alph*),itemsep=0.25ex}

\newcommand{\algtoprule}{\rule{\columnwidth}{\heavyrulewidth}{}}
\newcommand{\algbottomrule}{\rule[1ex]{\columnwidth}{\heavyrulewidth}{}}

%---- Theorems ----

\newtheorem{theorem}{Theorem}[chapter]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{corollary}[theorem]{Corollary}

\theoremstyle{definition}
\newtheorem{ex}{Exercise}[chapter]
\newtheorem{exs}[ex]{$\star$ Exercise}

%---- Notation ----

\DeclareMathOperator{\ball}{ball}
\DeclareMathOperator{\diam}{diam}
\DeclareMathOperator{\dist}{dist}
\DeclareMathOperator{\outdegree}{outdegree}
\DeclareMathOperator{\indegree}{indegree}

\DeclareMathOperator{\Input}{Input}
\DeclareMathOperator{\Output}{Output}
\DeclareMathOperator{\States}{States}
\DeclareMathOperator{\Msg}{Msg}
\DeclareMathOperator{\Init}{init}
\DeclareMathOperator{\Send}{send}
\DeclareMathOperator{\Receive}{receive}
\DeclareMathOperator{\Id}{id}

\renewcommand{\emptyset}{\varnothing}
\newcommand{\calF}{\mathcal{F}}
\newcommand{\calS}{\mathcal{S}}
\newcommand{\NN}{\mathbb{N}}
\newcommand{\NNpos}{\mathbb{Z}^+}
\newcommand{\RR}{\mathbb{R}}

\newcommand{\algo}[1]{\textsf{#1}}
\newcommand{\state}[1]{\textsf{#1}}
\newcommand{\msg}[1]{`\emph{#1}'}
\newcommand{\bin}[1]{\langle #1 \rangle}

\newcommand{\tmodel}[1]{\texorpdfstring{{\sffamily #1}}{#1}}
\newcommand{\talgo}[1]{\texorpdfstring{{\normalfont\sffamily #1}}{#1}}

\newcommand{\PN}{\textsf{PN}}
\newcommand{\LOCAL}{\textsf{LOCAL}}
\newcommand{\CONGEST}{\textsf{CONGEST}}
\newcommand{\tPN}{\tmodel{PN}}
\newcommand{\tLOCAL}{\tmodel{LOCAL}}
\newcommand{\tCONGEST}{\tmodel{CONGEST}}

%---- Macros ----

\newcommand{\Set}[1]{\{\, #1 \,\}}
\newcommand{\bigSet}[1]{\bigl\{\, #1 \,\bigr\}}
\newcommand{\Apx}[1]{$#1$\hyp approximation}
\newcommand{\Fact}[1]{$#1$\hyp factorisation}
\newcommand{\Reg}[1]{$#1$-regular}
\newcommand{\Dpocol}{$(\Delta+\nobreak 1)$-colouring}
\newcommand{\mydash}{ --- }
\newcommand{\mysep}{\begin{center}$* \quad * \quad *$\end{center}}

%---- Figures ----

\newcounter{myexternalpagenum}
\newcommand{\definepage}[1]{\stepcounter{myexternalpagenum}\edef#1{\arabic{myexternalpagenum}}}
\input{figlist.tex}

%---- Hints ----

\setenotez{
    list-name = {Hints},
    backref = true,
    mark-cs = {\hintnumber},
    counter-format = Alph,
    totoc = chapter
}

\DeclareInstance{enotez-list}{custom}{list}
{
    format = \normalfont,
    number-format = \normalfont,
    list-type = itemize
}

\newcommand{\hint}[1]{\nopagebreak\par\hfill{\footnotesize\em $\triangleright$ hint \endnote{#1}\par}}
\newcommand{\hintnumber}[1]{#1}

%---- Cover ----

\makeatletter
\renewcommand\maketitle{\begin{titlepage}
    \vspace*{\stretch{1}}
    \begin{center}
        {\Huge \@title \par}%
        \vspace{15mm}%
        {\LARGE \@author \par}%
        \vspace{3mm}
        {\large \myaffiliation \par}%
        \vspace{3mm}
        {\large \@date \par}%
        \vspace{20mm}
        {\large \mycovernote\par}
    \end{center}%
    \vspace*{\stretch{1}}
\end{titlepage}}
\makeatother

\title{Distributed Algorithms}
\author{Jukka Suomela}
\newcommand{\myaffiliation}{Aalto University, Finland}
\newcommand{\mycovernote}{%
    This is a preliminary version, \\
    see the website for updates: \\ 
    \url{http://users.ics.aalto.fi/suomela/da/}
}

\hypersetup{
    pdftitle={Distributed Algorithms},
    pdfauthor={Jukka Suomela},
}

%---- Development ----

\newcommand{\dinput}[1]{This chapter will be published later.}
